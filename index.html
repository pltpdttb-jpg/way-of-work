<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Mastery - PRU Academy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Sarabun', sans-serif; background-color: #ffffff; }
        
        /* Custom Colors based on request */
        .text-navy { color: #1e3a8a; } /* ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏™‡∏µ‡∏Å‡∏£‡∏°‡∏ó‡πà‡∏≤ */
        .text-dark-gray { color: #374151; } /* ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏™‡∏µ‡πÄ‡∏ó‡∏≤‡πÄ‡∏Ç‡πâ‡∏° */
        .btn-orange { 
            background-color: #f97316; 
            color: white; 
            transition: all 0.3s;
        }
        .btn-orange:hover { background-color: #ea580c; transform: translateY(-1px); }
        .bg-theme-blue { background-color: #0284c7; } /* ‡πÅ‡∏ñ‡∏ö‡∏™‡∏µ‡∏ü‡πâ‡∏≤/‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô */

        /* Input Validation Styles */
        .input-correct { border-color: #22c55e !important; background-color: #f0fdf4 !important; color: #15803d; }
        .input-wrong { border-color: #ef4444 !important; background-color: #fef2f2 !important; color: #b91c1c; }

        .page-section { display: none; animation: fadeIn 0.4s ease-in-out; }
        .page-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="flex flex-col min-h-screen text-slate-800">

    <header class="bg-theme-blue shadow-lg z-50">
        <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3 cursor-pointer" onclick="goHome()">
                <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-theme-blue font-bold text-xl shadow-sm">P</div>
                <div>
                    <h1 class="font-bold text-xl text-white tracking-wide">PRU Academy</h1>
                    <p class="text-xs text-blue-100">Sales Mastery System</p>
                </div>
            </div>
            <button onclick="goHome()" class="text-white hover:text-orange-200 text-sm font-medium flex items-center gap-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>
                ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
            </button>
        </div>
    </header>

    <main class="flex-grow container mx-auto px-4 py-8 max-w-5xl">

        <div id="home" class="page-section active">
            <div class="text-center py-10 space-y-6">
                <h2 class="text-4xl font-bold text-navy">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏®‡∏±‡∏Å‡∏¢‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</h2>
                <p class="text-dark-gray text-lg max-w-2xl mx-auto">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå ‡∏´‡∏£‡∏∑‡∏≠‡∏ù‡∏∂‡∏Å‡∏ù‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (Goal Setting) ‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ (Activity Management)</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-10 max-w-4xl mx-auto">
                    <div onclick="showPage('learning')" class="group bg-white border border-gray-200 p-8 rounded-xl shadow-sm hover:shadow-xl transition-all cursor-pointer relative overflow-hidden">
                        <div class="absolute top-0 left-0 w-2 h-full bg-blue-500"></div>
                        <div class="text-6xl mb-4 group-hover:scale-110 transition-transform duration-300">üìö</div>
                        <h3 class="text-2xl font-bold text-navy mb-2">Learning Mode</h3>
                        <p class="text-dark-gray">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå APE, Case Size, Issue Rate ‡πÅ‡∏•‡∏∞‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Funnel ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</p>
                        <div class="mt-6">
                            <span class="text-blue-600 font-semibold group-hover:underline">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‚Üí</span>
                        </div>
                    </div>

                    <div onclick="showPage('training')" class="group bg-white border border-gray-200 p-8 rounded-xl shadow-sm hover:shadow-xl transition-all cursor-pointer relative overflow-hidden">
                        <div class="absolute top-0 left-0 w-2 h-full bg-orange-500"></div>
                        <div class="text-6xl mb-4 group-hover:scale-110 transition-transform duration-300">üéØ</div>
                        <h3 class="text-2xl font-bold text-navy mb-2">Training Workshop</h3>
                        <p class="text-dark-gray">‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏à‡∏≤‡∏Å Conversion Rate ‡∏à‡∏£‡∏¥‡∏á</p>
                        <div class="mt-6">
                            <span class="text-orange-600 font-semibold group-hover:underline">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏° ‚Üí</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="learning" class="page-section">
            <div class="mb-6 border-b pb-4">
                <h2 class="text-3xl font-bold text-navy">üìö ‡∏Ñ‡∏•‡∏±‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ (Vocabulary & Logic)</h2>
                <p class="text-dark-gray mt-2">‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏£‡∏¥‡∏á</p>
            </div>

            <div class="space-y-6">
                <div class="bg-white rounded-lg shadow border-l-4 border-blue-500 p-6">
                    <h3 class="text-xl font-bold text-navy mb-3">1. Financial Metrics (‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô)</h3>
                    <div class="grid md:grid-cols-2 gap-4 text-dark-gray">
                        <div class="bg-gray-50 p-4 rounded">
                            <strong class="text-blue-700">APE (Annual Premium Equivalent)</strong><br>
                            ‡∏¢‡∏≠‡∏î‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏†‡∏±‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏õ‡∏µ ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏ù‡πà‡∏≤‡∏¢‡∏Ç‡∏≤‡∏¢
                        </div>
                        <div class="bg-gray-50 p-4 rounded">
                            <strong class="text-blue-700">Case Size (Ticket Size)</strong><br>
                            ‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ï‡πà‡∏≠‡∏£‡∏≤‡∏¢ = <span class="bg-white px-2 border rounded">Total APE √∑ Total Cases</span>
                        </div>
                        <div class="bg-gray-50 p-4 rounded">
                            <strong class="text-blue-700">Issued Rate (%)</strong><br>
                            ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏£‡∏°‡∏ò‡∏£‡∏£‡∏°‡πå (‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏õ)<br>
                            <span class="text-sm italic">‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô APE ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô (Submit) = Target APE √∑ Issued Rate</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow border-l-4 border-orange-500 p-6">
                    <h3 class="text-xl font-bold text-navy mb-3">2. Activity Funnel (‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢)</h3>
                    <p class="mb-4 text-dark-gray">‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Reverse Calculation) ‡∏à‡∏≤‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏π‡πà‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥</p>
                    <ul class="space-y-3">
                        <li class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-green-100 text-green-700 flex items-center justify-center font-bold">4</div>
                            <div><strong class="text-navy">Closed (‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢):</strong> ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å <code class="bg-gray-100 px-2 rounded">APE Submit √∑ Case Size</code></div>
                        </li>
                        <li class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center font-bold">3</div>
                            <div><strong class="text-navy">Presented (‡πÄ‡∏™‡∏ô‡∏≠‡∏Ç‡∏≤‡∏¢):</strong> = Closed √∑ (Closing Rate %)</div>
                        </li>
                        <li class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-indigo-100 text-indigo-700 flex items-center justify-center font-bold">2</div>
                            <div><strong class="text-navy">Met (‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏ö):</strong> = Presented √∑ (Present Rate %)</div>
                        </li>
                        <li class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-purple-100 text-purple-700 flex items-center justify-center font-bold">1</div>
                            <div><strong class="text-navy">Call (‡πÇ‡∏ó‡∏£‡∏ô‡∏±‡∏î):</strong> = Met √∑ (Meet Rate %)</div>
                        </li>
                         <li class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center font-bold">0</div>
                            <div><strong class="text-navy">Leads (‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠):</strong> = Call √∑ (Call Rate %)</div>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="mt-8 text-center">
                <button onclick="showPage('training')" class="btn-orange px-8 py-3 rounded-lg font-bold shadow-lg">‡πÑ‡∏õ‡∏™‡∏π‡πà‡πÇ‡∏´‡∏°‡∏î‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°</button>
            </div>
        </div>

        <div id="training" class="page-section">
            <div class="bg-navy-900 bg-slate-800 text-white rounded-xl p-6 mb-8 shadow-lg relative overflow-hidden">
                <div class="flex justify-between items-start z-10 relative">
                    <div>
                        <h2 class="text-2xl font-bold text-orange-400 mb-2">üìã ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-4 text-sm md:text-base">
                            <div>
                                <p class="text-gray-400 text-xs uppercase">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ APE ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</p>
                                <p class="text-2xl font-bold" id="scenTargetAPE">loading...</p>
                            </div>
                            <div>
                                <p class="text-gray-400 text-xs uppercase">‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÄ‡∏î‡∏¥‡∏° (Past Performance)</p>
                                <p>Total APE: <span id="scenPastAPE" class="font-mono text-yellow-300">...</span></p>
                                <p>Total Cases: <span id="scenPastCase" class="font-mono text-yellow-300">...</span> ‡∏£‡∏≤‡∏¢</p>
                            </div>
                            <div>
                                <p class="text-gray-400 text-xs uppercase">Issued Rate</p>
                                <p class="text-2xl font-bold text-green-400" id="scenIssueRate">...%</p>
                            </div>
                        </div>
                    </div>
                    <button onclick="generateScenario()" class="text-xs bg-white/10 hover:bg-white/20 px-3 py-1 rounded text-white border border-white/20 transition">‡∏™‡∏∏‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÉ‡∏´‡∏°‡πà</button>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                
                <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100">
                    <div class="flex items-center gap-2 mb-4">
                        <span class="bg-navy-blue bg-blue-900 text-white w-8 h-8 flex items-center justify-center rounded-full font-bold">1</span>
                        <h3 class="text-lg font-bold text-navy">‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (Financials)</h3>
                    </div>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-dark-gray mb-1">1.1 Case Size (‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ï‡πà‡∏≠‡∏£‡∏≤‡∏¢)</label>
                            <input type="number" id="ansCaseSize" class="w-full border-gray-300 border rounded-lg p-2.5 focus:ring-2 focus:ring-blue-500 outline-none" placeholder="‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÄ‡∏î‡∏¥‡∏°...">
                            <p class="text-xs text-gray-400 mt-1">* ‡∏Ñ‡∏¥‡∏î‡∏à‡∏≤‡∏Å Past APE ‡πÅ‡∏•‡∏∞ Past Cases</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-dark-gray mb-1">1.2 APE Submitted (‡∏¢‡∏≠‡∏î‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô)</label>
                            <input type="number" id="ansSubmitAPE" class="w-full border-gray-300 border rounded-lg p-2.5 focus:ring-2 focus:ring-blue-500 outline-none" placeholder="‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡πâ‡∏≤‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥...">
                            <p class="text-xs text-gray-400 mt-1">* ‡∏Ñ‡∏¥‡∏î‡∏à‡∏≤‡∏Å Target APE ‡πÅ‡∏•‡∏∞ Issued Rate</p>
                        </div>
                        <button onclick="checkPart1()" class="w-full btn-orange py-2 rounded-lg font-bold mt-2">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (Part 1)</button>
                    </div>
                </div>

                <div id="part2Section" class="bg-white p-6 rounded-xl shadow-md border border-gray-100 opacity-50 pointer-events-none filter grayscale transition-all duration-500">
                    <div class="flex items-center gap-2 mb-4">
                        <span class="bg-navy-blue bg-blue-900 text-white w-8 h-8 flex items-center justify-center rounded-full font-bold">2</span>
                        <h3 class="text-lg font-bold text-navy">‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° (Activity)</h3>
                    </div>
                    
                    <div class="space-y-5">
                         <div class="bg-blue-50 p-3 rounded-lg border border-blue-100">
                            <p class="text-xs font-bold text-navy mb-2 uppercase">Conversion Rates (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ)</p>
                            <div class="grid grid-cols-4 gap-2 text-center text-xs">
                                <div>
                                    <label>Lead>Call</label>
                                    <input type="number" id="rateLeadCall" class="w-full text-center p-1 rounded border border-blue-200 text-blue-800 font-bold" value="10">
                                </div>
                                <div>
                                    <label>Call>Met</label>
                                    <input type="number" id="rateCallMet" class="w-full text-center p-1 rounded border border-blue-200 text-blue-800 font-bold" value="30">
                                </div>
                                <div>
                                    <label>Met>Pres</label>
                                    <input type="number" id="rateMetPres" class="w-full text-center p-1 rounded border border-blue-200 text-blue-800 font-bold" value="70">
                                </div>
                                <div>
                                    <label>Pres>Close</label>
                                    <input type="number" id="ratePresClose" class="w-full text-center p-1 rounded border border-blue-200 text-blue-800 font-bold" value="40">
                                </div>
                            </div>
                        </div>

                        <div class="space-y-3">
                            <div class="flex items-center gap-2">
                                <label class="w-1/3 text-sm font-bold text-right text-navy">‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ (‡∏£‡∏≤‡∏¢):</label>
                                <input type="number" id="ansClosed" class="flex-1 border p-2 rounded text-sm" placeholder="?">
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="w-1/3 text-sm font-medium text-right text-gray-600">‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠ (‡∏£‡∏≤‡∏¢):</label>
                                <input type="number" id="ansPres" class="flex-1 border p-2 rounded text-sm" placeholder="?">
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="w-1/3 text-sm font-medium text-right text-gray-600">‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏ö (‡∏£‡∏≤‡∏¢):</label>
                                <input type="number" id="ansMet" class="flex-1 border p-2 rounded text-sm" placeholder="?">
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="w-1/3 text-sm font-medium text-right text-gray-600">‡πÇ‡∏ó‡∏£‡∏ô‡∏±‡∏î (‡∏£‡∏≤‡∏¢):</label>
                                <input type="number" id="ansCall" class="flex-1 border p-2 rounded text-sm" placeholder="?">
                            </div>
                            <div class="flex items-center gap-2">
                                <label class="w-1/3 text-sm font-medium text-right text-gray-600">Leads (‡∏£‡∏≤‡∏¢):</label>
                                <input type="number" id="ansLead" class="flex-1 border p-2 rounded text-sm" placeholder="?">
                            </div>
                        </div>

                        <button onclick="checkPart2()" class="w-full btn-orange py-2 rounded-lg font-bold">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏ú‡∏ô‡∏á‡∏≤‡∏ô (Part 2)</button>
                    </div>
                </div>
            </div>

            <div id="feedbackArea" class="hidden mt-8 p-6 bg-slate-50 rounded-xl border-l-4 border-indigo-500 shadow-sm animate-pulse">
                <h4 class="text-xl font-bold text-navy mb-2">üí° ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå (Analysis)</h4>
                <div id="feedbackText" class="text-dark-gray space-y-2"></div>
            </div>
        </div>

    </main>

    <footer class="bg-gray-100 border-t border-gray-300 py-6 mt-auto">
        <div class="max-w-7xl mx-auto text-center px-4">
            <p class="text-sm text-gray-500 font-medium">Powered by : <span class="text-orange-600 font-bold">PRU Academy</span> [ttb training team]</p>
            <p class="text-xs text-gray-400 mt-1">¬© 2024 All Rights Reserved</p>
        </div>
    </footer>

    <script>
        // --- State Management ---
        let currentScenario = {
            targetAPE: 0,
            pastAPE: 0,
            pastCase: 0,
            issueRate: 0,
            // Hidden answers
            realCaseSize: 0,
            realSubmitAPE: 0
        };

        // --- Navigation ---
        function goHome() {
            showPage('home');
        }

        function showPage(pageId) {
            document.querySelectorAll('.page-section').forEach(el => el.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            
            if(pageId === 'training') {
                if(currentScenario.targetAPE === 0) generateScenario(); // Only gen if empty
            }
        }

        // --- Training Logic ---
        function generateScenario() {
            // Randomize Data
            const targets = [500000, 1000000, 1200000, 2000000, 600000];
            const issueRates = [75, 80, 85, 90];
            
            currentScenario.targetAPE = targets[Math.floor(Math.random() * targets.length)];
            currentScenario.pastCase = Math.floor(Math.random() * 20) + 10; // 10-30 cases
            // Create Past APE based on random Case Size (20k - 100k)
            let randomCaseSize = Math.floor(Math.random() * 8 + 2) * 10000; 
            currentScenario.pastAPE = currentScenario.pastCase * randomCaseSize;
            currentScenario.issueRate = issueRates[Math.floor(Math.random() * issueRates.length)];

            // Calculate Real Answers for Validation
            currentScenario.realCaseSize = currentScenario.pastAPE / currentScenario.pastCase;
            currentScenario.realSubmitAPE = Math.round(currentScenario.targetAPE / (currentScenario.issueRate / 100));

            // Render Scenario
            document.getElementById('scenTargetAPE').innerText = currentScenario.targetAPE.toLocaleString();
            document.getElementById('scenPastAPE').innerText = currentScenario.pastAPE.toLocaleString();
            document.getElementById('scenPastCase').innerText = currentScenario.pastCase;
            document.getElementById('scenIssueRate').innerText = currentScenario.issueRate;

            // Reset Inputs & Styles
            resetInputs();
        }

        function resetInputs() {
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => {
                // Don't reset conversion rates
                if(!input.id.includes('rate')) {
                    input.value = '';
                    input.classList.remove('input-correct', 'input-wrong');
                }
            });
            
            // Lock Part 2
            const p2 = document.getElementById('part2Section');
            p2.classList.add('opacity-50', 'pointer-events-none', 'filter', 'grayscale');
            
            document.getElementById('feedbackArea').classList.add('hidden');
        }

        function checkPart1() {
            const userSize = parseFloat(document.getElementById('ansCaseSize').value);
            const userSubmit = parseFloat(document.getElementById('ansSubmitAPE').value);

            let isCorrect = true;

            // Validate Case Size (Exact match expected)
            const inputSize = document.getElementById('ansCaseSize');
            if (Math.abs(userSize - currentScenario.realCaseSize) < 1) { // Allow small float diff
                inputSize.classList.add('input-correct');
                inputSize.classList.remove('input-wrong');
            } else {
                inputSize.classList.add('input-wrong');
                inputSize.classList.remove('input-correct');
                isCorrect = false;
            }

            // Validate Submit APE
            const inputSubmit = document.getElementById('ansSubmitAPE');
            if (Math.abs(userSubmit - currentScenario.realSubmitAPE) < 10) { // Allow +/- 10 rounding
                inputSubmit.classList.add('input-correct');
                inputSubmit.classList.remove('input-wrong');
            } else {
                inputSubmit.classList.add('input-wrong');
                inputSubmit.classList.remove('input-correct');
                isCorrect = false;
            }

            if (isCorrect) {
                // Unlock Part 2
                const p2 = document.getElementById('part2Section');
                p2.classList.remove('opacity-50', 'pointer-events-none', 'filter', 'grayscale');
                // Scroll to Part 2
                p2.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        function checkPart2() {
            // 1. Get User Input & Rates
            const uClose = parseInt(document.getElementById('ansClosed').value) || 0;
            const uPres = parseInt(document.getElementById('ansPres').value) || 0;
            const uMet = parseInt(document.getElementById('ansMet').value) || 0;
            const uCall = parseInt(document.getElementById('ansCall').value) || 0;
            const uLead = parseInt(document.getElementById('ansLead').value) || 0;

            const rPC = parseFloat(document.getElementById('ratePresClose').value) / 100;
            const rMP = parseFloat(document.getElementById('rateMetPres').value) / 100;
            const rCM = parseFloat(document.getElementById('rateCallMet').value) / 100;
            const rLC = parseFloat(document.getElementById('rateLeadCall').value) / 100;

            // 2. Calculate Correct Logic Chain
            const correctClosed = Math.ceil(currentScenario.realSubmitAPE / currentScenario.realCaseSize);
            const correctPres = Math.ceil(correctClosed / rPC);
            const correctMet = Math.ceil(correctPres / rMP);
            const correctCall = Math.ceil(correctMet / rCM);
            const correctLead = Math.ceil(correctCall / rLC);

            let feedbackMsg = [];
            let allCorrect = true;

            // 3. Validation Helper
            const validate = (id, userVal, correctVal) => {
                const el = document.getElementById(id);
                // Allow error margin of 1-2 for rounding diffs
                if (Math.abs(userVal - correctVal) <= 2 && userVal !== 0) {
                    el.classList.add('input-correct');
                    el.classList.remove('input-wrong');
                    return true;
                } else {
                    el.classList.add('input-wrong');
                    el.classList.remove('input-correct');
                    return false;
                }
            };

            // Check Step by Step
            if(!validate('ansClosed', uClose, correctClosed)) allCorrect = false;
            if(!validate('ansPres', uPres, correctPres)) allCorrect = false;
            if(!validate('ansMet', uMet, correctMet)) allCorrect = false;
            if(!validate('ansCall', uCall, correctCall)) allCorrect = false;
            if(!validate('ansLead', uLead, correctLead)) allCorrect = false;

            // 4. Generate Feedback
            const feedbackArea = document.getElementById('feedbackArea');
            const feedbackText = document.getElementById('feedbackText');
            feedbackArea.classList.remove('hidden');

            if (allCorrect) {
                feedbackArea.classList.remove('animate-pulse');
                feedbackArea.classList.add('bg-green-50', 'border-green-500');
                feedbackArea.classList.remove('bg-slate-50', 'border-indigo-500');
                
                let tips = "<ul class='list-disc pl-5 text-green-800 font-medium'><li>‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏ú‡∏ô‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</li>";
                
                // Analyze Rates for Improvement
                if (rPC < 0.3) tips += "<li class='text-orange-600'>‡∏Ç‡πâ‡∏≠‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï: Closing Rate ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 30% ‡∏ñ‡πâ‡∏≤‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Lead ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏≤‡∏•‡∏á‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å</li>";
                if (rLC < 0.1) tips += "<li class='text-orange-600'>‡∏Ç‡πâ‡∏≠‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï: Lead to Call ‡∏ï‡πà‡∏≥ (‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û?) ‡∏•‡∏≠‡∏á‡∏™‡∏Å‡∏£‡∏µ‡∏ô‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô</li>";
                
                tips += "</ul>";
                feedbackText.innerHTML = tips;

            } else {
                feedbackArea.classList.add('bg-slate-50', 'border-indigo-500');
                feedbackArea.classList.remove('bg-green-50', 'border-green-500');
                
                let msg = "<p class='text-red-600 font-bold'>‡∏û‡∏ö‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏™‡∏π‡∏ï‡∏£:</p><ul class='list-disc pl-5 mt-2'>";
                if(Math.abs(uClose - correctClosed) > 2) msg += `<li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô ~${correctClosed} ‡∏£‡∏≤‡∏¢ (‡∏Ñ‡∏¥‡∏î‡∏à‡∏≤‡∏Å APE Submit / Case Size)</li>`;
                if(Math.abs(uPres - correctPres) > 2) msg += `<li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô ~${correctPres} ‡∏£‡∏≤‡∏¢ (‡∏Ñ‡∏¥‡∏î‡∏à‡∏≤‡∏Å ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ / ${rPC*100}%)</li>`;
                // Add more logic hints if needed
                msg += "</ul><p class='mt-2 text-sm text-gray-500'>*‡∏•‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏õ‡∏±‡∏î‡πÄ‡∏®‡∏©‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>";
                feedbackText.innerHTML = msg;
            }
        }
    </script>
</body>
</html>
